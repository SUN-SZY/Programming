{{ define "main" }}
{{ partial "page-header" . }}


<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="md:col-10 lg:col-6 mx-auto">
        <!--          <form action="{{ site.Params.contact_form_action }}" method="POST">-->
        <!--            <div class="mb-6">-->
        <!--              <label for="name" class="form-label">-->
        <!--                姓名 <span class="text-red-500">*</span>-->
        <!--              </label>-->
        <!--              <input-->
        <!--                id="name"-->
        <!--                name="name"-->
        <!--                class="form-input"-->
        <!--                placeholder="SUN"-->
        <!--                type="text" />-->
        <!--            </div>-->
        <!--            <div class="mb-6">-->
        <!--              <label for="email" class="form-label">-->
        <!--                个人邮件 <span class="text-red-500">*</span>-->
        <!--              </label>-->
        <!--              <input-->
        <!--                id="email"-->
        <!--                name="email"-->
        <!--                class="form-input"-->
        <!--                placeholder="john.doe@email.com"-->
        <!--                type="email" />-->
        <!--            </div>-->
        <!--            <div class="mb-6">-->
        <!--              <label for="message" class="form-label">-->
        <!--                Anything else? <span class="text-red-500">*</span>-->
        <!--              </label>-->
        <!--              <textarea-->
        <!--                id="message"-->
        <!--                name="message"-->
        <!--                class="form-input"-->
        <!--                placeholder="更多想法... ..."-->
        <!--                rows="8"></textarea>-->
        <!--            </div>-->
        <!--            <button type="submit" class="btn btn-primary">提交</button>-->
        <!--          </form>-->

        <!--          <iframe aria-label='GitHub' frameborder="0" allow="camera;" style="height:100%;width:99%;border:none;" src='https://forms.zohopublic.com.cn/haue1/form/GitHub/formperma/p1NOM-2NxpGjYRfedqmib-8rLMtNkkl0weTLPQMAEeI?zf_enablecamera=true'></iframe>-->
        <div id="zf_div_p1NOM-2NxpGjYRfedqmib-8rLMtNkkl0weTLPQMAEeI"></div>

        <script type="text/javascript">
          (function() {
            try {
              var f = document.createElement("iframe");
              f.src =
                "https://forms.zohopublic.com.cn/haue1/form/GitHub/formperma/p1NOM-2NxpGjYRfedqmib-8rLMtNkkl0weTLPQMAEeI?zf_rszfm=1&zf_enablecamera=true";
              f.style.border = "none";
              f.style.height = "936px";
              f.style.width = "90%";
              f.style.transition = "all 0.5s ease";
              f.setAttribute("aria-label", '\u4E0E\u6211\u8054\u7CFB');
              f.setAttribute("allow", "camera;");
              var d = document.getElementById(
                "zf_div_p1NOM-2NxpGjYRfedqmib-8rLMtNkkl0weTLPQMAEeI"
              );
              d.appendChild(f);
              window.addEventListener(
                "message",
                function() {
                  var evntData = event.data;
                  if (evntData && evntData.constructor == String) {
                    var zf_ifrm_data = evntData.split("|");
                    if (
                      zf_ifrm_data.length == 2 ||
                      zf_ifrm_data.length == 3
                    ) {
                      var zf_perma = zf_ifrm_data[0];
                      var zf_ifrm_ht_nw =
                        parseInt(zf_ifrm_data[1], 10) + 15 + "px";
                      var iframe = document
                        .getElementById(
                          "zf_div_p1NOM-2NxpGjYRfedqmib-8rLMtNkkl0weTLPQMAEeI"
                        )
                        .getElementsByTagName("iframe")[0];
                      if (
                        iframe.src.indexOf("formperma") > 0 &&
                        iframe.src.indexOf(zf_perma) > 0
                      ) {
                        var prevIframeHeight = iframe.style.height;
                        var zf_tout = false;
                        if (zf_ifrm_data.length == 3) {
                          iframe.scrollIntoView();
                          zf_tout = true;
                        }
                        if (prevIframeHeight != zf_ifrm_ht_nw) {
                          if (zf_tout) {
                            setTimeout(function() {
                              iframe.style.height = zf_ifrm_ht_nw;
                            }, 500);
                          } else {
                            iframe.style.height = zf_ifrm_ht_nw;
                          }
                        }
                      }
                    }
                  }
                },
                false
              );
            } catch (e) {
            }
          })();
        </script>
      </div>
    </div>
  </div>
</section>

<!-- google map -->
{{ with site.Params.google_map }}
{{ if .enable }}
<div
  id="map"
  style="height: 400px;"
  data-latitude="{{ .map_latitude }}"
  data-longitude="{{ .map_longitude }}"
  data-marker="{{ .map_marker | relURL }}"
  data-marker-name="{{ site.Title }}"></div>
{{ end }}
{{ end }}

{{ with site.Params.subscription }}
{{ if .enable }}
<!-- subscription form -->
<form
  action="{{ .mailchimp_form_action | safeURL }}"
  method="post"
  id="mc-embedded-subscribe-form"
  novalidate="novalidate">
  <div class="input-group w-75 mx-auto mb-3">
    <input
      type="email"
      name="EMAIL"
      placeholder="邮件"
      class="form-control required email mce_inline_error"
      id="mce-EMAIL"
      aria-required="true"
      autocomplete="off"
      required />
    <button
      class="input-group-text"
      name="subscribe"
      id="mc-embedded-subscribe">
      {{ .button_label }}
    </button>
  </div>
  <input
    type="hidden"
    name="EMAILTYPE"
    id="mce-EMAILTYPE-0"
    value="html" />
  <div style="position:absolute;left:-5000px" aria-hidden="true">
    <input type="text" name="{{ .name }}" tabindex="-1" />
  </div>
</form>
<div id="mce-responses" class="clear">
  <div
    class="response text-white"
    id="mce-error-response"
    style="display:none"></div>
  <div
    class="response text-white"
    id="mce-success-response"
    style="display:none"></div>
</div>
<script
  type="text/javascript"
  src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script>
<!-- /subscription form -->
{{ end }}
{{ end }}

{{ if site.Params.google_map.enable }}
{{ $gmap:= resources.Get "plugins/maps/google-map.js" }}
<script defer src="{{ $gmap.RelPermalink }}"></script>

<script
  src="https://maps.googleapis.com/maps/api/js?key={{ site.Params.google_map.map_api_key }}&libraries=places"></script>
{{ end }}

{{ end }}
